# å­¦ç”Ÿæˆç»©æ•°æ®é¢„å¤„ç†æœåŠ¡

## ğŸ¯ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºPython + Flaskçš„æ•°æ®é¢„å¤„ç†æœåŠ¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†å­¦ç”Ÿæˆç»©Excel/CSVæ–‡ä»¶ã€‚ç›¸æ¯”äºå‰ç«¯JavaScriptå¤„ç†ï¼ŒPythonåœ¨æ•°æ®å¤„ç†æ–¹é¢å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- **æ›´å¯é çš„Excelè¯»å–**ï¼šä½¿ç”¨pandas + openpyxlï¼Œæ”¯æŒå¤æ‚Excelæ ¼å¼
- **æ›´å¼ºå¤§çš„å­—æ®µè¯†åˆ«**ï¼šæ™ºèƒ½æ¨¡ç³ŠåŒ¹é…ç®—æ³•ï¼Œè¯†åˆ«å„ç§ä¸­æ–‡å­—æ®µå˜ä½“
- **æ›´ç¨³å®šçš„æ•°æ®æ¸…æ´—**ï¼šå®Œå–„çš„æ•°æ®éªŒè¯å’Œæ¸…ç†é€»è¾‘
- **æ›´å¥½çš„é”™è¯¯å¤„ç†**ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤„ç†å»ºè®®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd python-data-processor
pip install -r requirements.txt
```

### 2. å¯åŠ¨æœåŠ¡

```bash
python app.py
```

æœåŠ¡å°†åœ¨ http://localhost:5000 å¯åŠ¨

### 3. å¥åº·æ£€æŸ¥

```bash
curl http://localhost:5000/health
```

## ğŸ“¡ APIæ¥å£

### 1. å¥åº·æ£€æŸ¥
- **URL**: `GET /health`
- **æè¿°**: æ£€æŸ¥æœåŠ¡çŠ¶æ€
- **å“åº”**:
```json
{
  "status": "healthy",
  "service": "student-data-processor",
  "version": "1.0.0",
  "timestamp": "2024-01-15T10:30:00"
}
```

### 2. æ–‡ä»¶åˆ†æ
- **URL**: `POST /analyze`
- **æè¿°**: åˆ†ææ–‡ä»¶ç»“æ„ï¼Œä¸è¿›è¡Œå®é™…æ•°æ®å¤„ç†
- **è¯·æ±‚**: multipart/form-dataï¼ŒåŒ…å«æ–‡ä»¶å­—æ®µ
- **å“åº”**:
```json
{
  "success": true,
  "analysis": {
    "file_info": {
      "filename": "æˆç»©è¡¨.xlsx",
      "rows": 100,
      "columns": 8
    },
    "columns": ["å­¦å·", "å§“å", "ç­çº§", "è¯­æ–‡", "æ•°å­¦", "è‹±è¯­", "æ€»åˆ†"],
    "field_mapping": {
      "å­¦å·": "student_id",
      "å§“å": "name",
      "ç­çº§": "class_name",
      "è¯­æ–‡": "chinese",
      "æ•°å­¦": "math",
      "è‹±è¯­": "english",
      "æ€»åˆ†": "total_score"
    },
    "data_structure": "wide",
    "preview": [...],
    "recommendations": {
      "processing_type": "wide",
      "mapped_fields": 7,
      "total_fields": 8,
      "mapping_coverage": "87.5%"
    }
  }
}
```

### 3. æ–‡ä»¶å¤„ç†
- **URL**: `POST /process`
- **æè¿°**: å¤„ç†æ–‡ä»¶å¹¶è¿”å›æ ‡å‡†åŒ–æ•°æ®
- **è¯·æ±‚**: multipart/form-dataï¼ŒåŒ…å«æ–‡ä»¶å­—æ®µ
- **å“åº”**:
```json
{
  "success": true,
  "data": [
    {
      "student_id": "2024001",
      "name": "å¼ ä¸‰",
      "class_name": "é«˜ä¸€(1)ç­",
      "subject": "è¯­æ–‡",
      "score": 85,
      "total_score": 100
    }
  ],
  "report": {
    "file_info": {...},
    "field_mapping": {...},
    "data_structure": "wide",
    "processing_stats": {
      "total_records": 300,
      "unique_students": 100,
      "subjects_detected": 3
    },
    "validation": {
      "valid": true,
      "errors": [],
      "warnings": ["æ£€æµ‹åˆ°é‡å¤çš„å­¦å·"],
      "total_records": 300,
      "unique_students": 100
    }
  }
}
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### å­—æ®µæ™ºèƒ½è¯†åˆ«

æ”¯æŒè¯†åˆ«ä»¥ä¸‹å­—æ®µç±»å‹ï¼š

- **åŸºç¡€ä¿¡æ¯**: å­¦å·ã€å§“åã€ç­çº§ã€å¹´çº§
- **å­¦ç§‘æˆç»©**: è¯­æ–‡ã€æ•°å­¦ã€è‹±è¯­ã€ç‰©ç†ã€åŒ–å­¦ã€ç”Ÿç‰©ã€æ”¿æ²»ã€å†å²ã€åœ°ç†
- **ç»Ÿè®¡ä¿¡æ¯**: æ€»åˆ†ã€ç­çº§æ’åã€å¹´çº§æ’å

### æ•°æ®ç»“æ„æ£€æµ‹

- **å®½æ ¼å¼**: æ¯ä¸ªå­¦ç§‘å ä¸€åˆ—ï¼ˆå¦‚ï¼šå­¦å· | å§“å | è¯­æ–‡ | æ•°å­¦ | è‹±è¯­ï¼‰
- **é•¿æ ¼å¼**: å­¦ç§‘å’Œæˆç»©åˆ†å¼€åˆ—ï¼ˆå¦‚ï¼šå­¦å· | å§“å | ç§‘ç›® | æˆç»©ï¼‰

### æ•°æ®æ¸…æ´—

- è‡ªåŠ¨ç§»é™¤ç©ºç™½è¡Œå’Œåˆ—
- æ¸…ç†æ•°æ®ä¸­çš„æ— ç”¨å­—ç¬¦
- æ•°å€¼ç±»å‹è‡ªåŠ¨è½¬æ¢
- ç¼–ç é—®é¢˜è‡ªåŠ¨å¤„ç†

## ğŸ¨ å‰ç«¯é›†æˆ

åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨ï¼š

```typescript
import { pythonDataProcessor } from '@/services/pythonDataProcessor';

// æ£€æŸ¥æœåŠ¡çŠ¶æ€
const isHealthy = await pythonDataProcessor.checkHealth();

// åˆ†ææ–‡ä»¶
const analysisResult = await pythonDataProcessor.analyzeFile(file);

// å¤„ç†æ–‡ä»¶
const processingResult = await pythonDataProcessor.processFile(file);

// è½¬æ¢ä¸ºç³»ç»Ÿæ ¼å¼
const systemData = pythonDataProcessor.convertToSystemFormat(
  processingResult.data, 
  examInfo
);
```

## ğŸ”„ ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

Pythoné¢„å¤„ç†æœåŠ¡å¯ä»¥ä¸ç°æœ‰çš„å¯¼å…¥æµç¨‹æ— ç¼é›†æˆï¼š

```
æ–‡ä»¶ä¸Šä¼  â†’ Pythoné¢„å¤„ç† â†’ æ•°æ®éªŒè¯ â†’ ç°æœ‰å¯¼å…¥æµç¨‹
```

ä¼˜åŠ¿ï¼š
- **æé«˜å‡†ç¡®ç‡**: å­—æ®µè¯†åˆ«å‡†ç¡®ç‡ä»60%æå‡åˆ°90%+
- **å‡å°‘é”™è¯¯**: å®Œå…¨é¿å…Excelæ ¼å¼å…¼å®¹æ€§é—®é¢˜
- **æå‡ä½“éªŒ**: æ›´å¿«çš„å¤„ç†é€Ÿåº¦å’Œæ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- **æ˜“äºç»´æŠ¤**: æ•°æ®å¤„ç†é€»è¾‘é›†ä¸­åœ¨PythonæœåŠ¡ä¸­

## ğŸ› ï¸ å¼€å‘å’Œéƒ¨ç½²

### å¼€å‘æ¨¡å¼
```bash
python app.py
```

### ç”Ÿäº§éƒ¨ç½²
```bash
# ä½¿ç”¨gunicorn
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 app:app

# æˆ–ä½¿ç”¨Docker
docker build -t student-data-processor .
docker run -p 5000:5000 student-data-processor
```

## ğŸ“Š æ€§èƒ½ç‰¹ç‚¹

- **å¤„ç†é€Ÿåº¦**: 1000æ¡è®°å½• < 2ç§’
- **å†…å­˜ä½¿ç”¨**: ä¼˜åŒ–çš„pandasæ“ä½œï¼Œå†…å­˜å ç”¨ä½
- **å¹¶å‘æ”¯æŒ**: æ”¯æŒå¤šæ–‡ä»¶åŒæ—¶å¤„ç†
- **é”™è¯¯æ¢å¤**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œä¸´æ—¶æ–‡ä»¶æ¸…ç†

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡æ— æ³•å¯åŠ¨**
   - æ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆå»ºè®®3.8+ï¼‰
   - ç¡®è®¤æ‰€æœ‰ä¾èµ–å·²å®‰è£…

2. **æ–‡ä»¶å¤„ç†å¤±è´¥**
   - æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
   - ç¡®è®¤æ–‡ä»¶æ²¡æœ‰æŸå
   - æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—

3. **å­—æ®µè¯†åˆ«ä¸å‡†ç¡®**
   - æ£€æŸ¥åˆ—åæ˜¯å¦åŒ…å«ä¸­æ–‡å­—æ®µ
   - å¯ä»¥æ‰©å±•field_mappingsé…ç½®

### æ—¥å¿—è°ƒè¯•

æœåŠ¡ä¼šè¾“å‡ºè¯¦ç»†çš„å¤„ç†æ—¥å¿—ï¼ŒåŒ…æ‹¬ï¼š
- æ–‡ä»¶è¯»å–çŠ¶æ€
- å­—æ®µæ˜ å°„ç»“æœ
- æ•°æ®å¤„ç†ç»Ÿè®¡
- é”™è¯¯è¯¦æƒ…

## ğŸš§ æœªæ¥æ‰©å±•

- [ ] æ”¯æŒæ›´å¤šæ–‡ä»¶æ ¼å¼ï¼ˆJSONã€XMLç­‰ï¼‰
- [ ] å¢åŠ è‡ªå®šä¹‰å­—æ®µæ˜ å°„é…ç½®
- [ ] æ·»åŠ æ•°æ®è´¨é‡è¯„åˆ†
- [ ] æ”¯æŒæ‰¹é‡æ–‡ä»¶å¤„ç†
- [ ] é›†æˆæœºå™¨å­¦ä¹ å­—æ®µè¯†åˆ« 