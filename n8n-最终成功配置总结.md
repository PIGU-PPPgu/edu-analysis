# ğŸ‰ n8næ™ºèƒ½CSVè§£æå·¥ä½œæµ - æœ€ç»ˆæˆåŠŸé…ç½®æ€»ç»“

## âœ… é…ç½®å®ŒæˆçŠ¶æ€

**å·¥ä½œæµID**: `hdvsS4C8zIFfruqD`  
**å·¥ä½œæµåç§°**: "æ™ºèƒ½è¡¨æ ¼è§£æ"  
**çŠ¶æ€**: å·²å®Œæ•´é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨

## ğŸ“Š å®Œæ•´é…ç½®è¯¦æƒ…

### ğŸ”§ èŠ‚ç‚¹é…ç½® (7ä¸ªèŠ‚ç‚¹)

1. **WebhookèŠ‚ç‚¹** âœ…
   - HTTPæ–¹æ³•: POST
   - è·¯å¾„: `083f9843-c404-4c8f-8210-e64563608f57`
   - å“åº”æ¨¡å¼: responseNode

2. **CodeèŠ‚ç‚¹** âœ…
   - åŠŸèƒ½: CSVæ–‡ä»¶é¢„å¤„ç†
   - å°†ä¸Šä¼ çš„æ–‡ä»¶è½¬æ¢ä¸ºå¯è§£æçš„æ ¼å¼

3. **Information ExtractorèŠ‚ç‚¹** âœ…
   - **71ä¸ªå­—æ®µ**å…¨éƒ¨é…ç½®å®Œæˆ
   - AIæç¤ºè¯å·²ä¼˜åŒ–
   - è¿æ¥DeepSeek AIæ¨¡å‹

4. **DeepSeek Chat ModelèŠ‚ç‚¹** âœ…
   - AIæ¨¡å‹: DeepSeek
   - ä¸ºInformation Extractoræä¾›æ™ºèƒ½è§£æèƒ½åŠ›

5. **Edit FieldsèŠ‚ç‚¹** âœ…
   - æ·»åŠ exam_idå’Œcreated_atå­—æ®µ
   - æ•°æ®åå¤„ç†

6. **SupabaseèŠ‚ç‚¹** âœ…
   - ç›®æ ‡è¡¨: grade_data
   - **71ä¸ªå­—æ®µæ˜ å°„**å…¨éƒ¨é…ç½®
   - è¿æ¥Supabaseæ•°æ®åº“

7. **Respond to WebhookèŠ‚ç‚¹** âœ…
   - è¿”å›JSONå“åº”
   - åŒ…å«å¤„ç†ç»“æœå’ŒçŠ¶æ€ä¿¡æ¯

### ğŸ“‹ 71ä¸ªå­—æ®µå®Œæ•´åˆ—è¡¨

#### åŸºç¡€ä¿¡æ¯ (5ä¸ª)
- `student_id` - å­¦å·
- `name` - å§“å
- `class_name` - ç­çº§åç§°
- `grade` - å¹´çº§ä¿¡æ¯
- `gender` - æ€§åˆ«

#### ç§‘ç›®æˆç»© (14ä¸ª)
- `chinese` - è¯­æ–‡æˆç»©åˆ†æ•°
- `math` - æ•°å­¦æˆç»©åˆ†æ•°
- `english` - è‹±è¯­æˆç»©åˆ†æ•°
- `physics` - ç‰©ç†æˆç»©åˆ†æ•°
- `chemistry` - åŒ–å­¦æˆç»©åˆ†æ•°
- `politics` - æ”¿æ²»æˆç»©åˆ†æ•°
- `history` - å†å²æˆç»©åˆ†æ•°
- `biology` - ç”Ÿç‰©æˆç»©åˆ†æ•°
- `geography` - åœ°ç†æˆç»©åˆ†æ•°
- `pe` - ä½“è‚²æˆç»©åˆ†æ•°
- `music` - éŸ³ä¹æˆç»©åˆ†æ•°
- `art` - ç¾æœ¯æˆç»©åˆ†æ•°
- `it` - ä¿¡æ¯æŠ€æœ¯æˆç»©åˆ†æ•°
- `general_tech` - é€šç”¨æŠ€æœ¯æˆç»©åˆ†æ•°

#### ç§‘ç›®ç­‰çº§ (14ä¸ª)
- `chinese_grade` - è¯­æ–‡ç­‰çº§
- `math_grade` - æ•°å­¦ç­‰çº§
- `english_grade` - è‹±è¯­ç­‰çº§
- `physics_grade` - ç‰©ç†ç­‰çº§
- `chemistry_grade` - åŒ–å­¦ç­‰çº§
- `politics_grade` - æ”¿æ²»ç­‰çº§
- `history_grade` - å†å²ç­‰çº§
- `biology_grade` - ç”Ÿç‰©ç­‰çº§
- `geography_grade` - åœ°ç†ç­‰çº§
- `pe_grade` - ä½“è‚²ç­‰çº§
- `music_grade` - éŸ³ä¹ç­‰çº§
- `art_grade` - ç¾æœ¯ç­‰çº§
- `it_grade` - ä¿¡æ¯æŠ€æœ¯ç­‰çº§
- `general_tech_grade` - é€šç”¨æŠ€æœ¯ç­‰çº§

#### ç­çº§æ’å (14ä¸ª)
- `chinese_class_rank` - è¯­æ–‡ç­çº§æ’å
- `math_class_rank` - æ•°å­¦ç­çº§æ’å
- `english_class_rank` - è‹±è¯­ç­çº§æ’å
- `physics_class_rank` - ç‰©ç†ç­çº§æ’å
- `chemistry_class_rank` - åŒ–å­¦ç­çº§æ’å
- `politics_class_rank` - æ”¿æ²»ç­çº§æ’å
- `history_class_rank` - å†å²ç­çº§æ’å
- `biology_class_rank` - ç”Ÿç‰©ç­çº§æ’å
- `geography_class_rank` - åœ°ç†ç­çº§æ’å
- `pe_class_rank` - ä½“è‚²ç­çº§æ’å
- `music_class_rank` - éŸ³ä¹ç­çº§æ’å
- `art_class_rank` - ç¾æœ¯ç­çº§æ’å
- `it_class_rank` - ä¿¡æ¯æŠ€æœ¯ç­çº§æ’å
- `general_tech_class_rank` - é€šç”¨æŠ€æœ¯ç­çº§æ’å

#### å¹´çº§æ’å (14ä¸ª)
- `chinese_grade_rank` - è¯­æ–‡å¹´çº§æ’å
- `math_grade_rank` - æ•°å­¦å¹´çº§æ’å
- `english_grade_rank` - è‹±è¯­å¹´çº§æ’å
- `physics_grade_rank` - ç‰©ç†å¹´çº§æ’å
- `chemistry_grade_rank` - åŒ–å­¦å¹´çº§æ’å
- `politics_grade_rank` - æ”¿æ²»å¹´çº§æ’å
- `history_grade_rank` - å†å²å¹´çº§æ’å
- `biology_grade_rank` - ç”Ÿç‰©å¹´çº§æ’å
- `geography_grade_rank` - åœ°ç†å¹´çº§æ’å
- `pe_grade_rank` - ä½“è‚²å¹´çº§æ’å
- `music_grade_rank` - éŸ³ä¹å¹´çº§æ’å
- `art_grade_rank` - ç¾æœ¯å¹´çº§æ’å
- `it_grade_rank` - ä¿¡æ¯æŠ€æœ¯å¹´çº§æ’å
- `general_tech_grade_rank` - é€šç”¨æŠ€æœ¯å¹´çº§æ’å

#### ç»Ÿè®¡ä¿¡æ¯ (6ä¸ª)
- `total_score` - æ€»åˆ†
- `average_score` - å¹³å‡åˆ†
- `rank_in_class` - ç­çº§æ€»æ’å
- `rank_in_grade` - å¹´çº§æ€»æ’å
- `rank_in_school` - æ ¡å†…æ€»æ’å
- `total_grade` - æ€»åˆ†ç­‰çº§

#### è€ƒè¯•ä¿¡æ¯ (4ä¸ª)
- `exam_title` - è€ƒè¯•åç§°
- `exam_type` - è€ƒè¯•ç±»å‹
- `exam_date` - è€ƒè¯•æ—¥æœŸ
- `exam_scope` - è€ƒè¯•èŒƒå›´

## ğŸŒ Webhookä½¿ç”¨æ–¹æ³•

### ğŸ“ Webhook URL
```
http://localhost:5678/webhook/083f9843-c404-4c8f-8210-e64563608f57
```

### ğŸ§ª æµ‹è¯•å‘½ä»¤
```bash
curl -X POST http://localhost:5678/webhook/083f9843-c404-4c8f-8210-e64563608f57 \
  -H "Content-Type: multipart/form-data" \
  -F "file=@907ä¹ä¸‹æœˆè€ƒæˆç»©.csv"
```

### ğŸ“¤ é¢„æœŸå“åº”
```json
{
  "success": true,
  "message": "æ•°æ®è§£æå’Œä¿å­˜æˆåŠŸ",
  "processed_count": 1,
  "timestamp": "2025-06-14T16:30:00.000Z"
}
```

## ğŸ¯ å·¥ä½œæµç¨‹å›¾

```
ğŸ“¥ CSVæ–‡ä»¶ä¸Šä¼ 
    â†“
ğŸŒ Webhookæ¥æ”¶
    â†“
ğŸ’» Codeé¢„å¤„ç†
    â†“
ğŸ¤– Information Extractor (71å­—æ®µè§£æ)
    â†‘
ğŸ§  DeepSeek AIæ¨¡å‹
    â†“
âœï¸ Edit Fields (æ·»åŠ å…ƒæ•°æ®)
    â†“
ğŸ—„ï¸ Supabaseä¿å­˜
    â†“
ğŸ“¤ Respond to Webhook (è¿”å›ç»“æœ)
```

## âœ… ç³»ç»Ÿå…¼å®¹æ€§ç¡®è®¤

### ğŸ—„ï¸ æ•°æ®åº“å…¼å®¹æ€§
- âœ… `grade_data`è¡¨æ”¯æŒæ‰€æœ‰71ä¸ªå­—æ®µ
- âœ… å­—æ®µç±»å‹å®Œå…¨åŒ¹é…
- âœ… æ”¯æŒåŠ¨æ€å­—æ®µæ‰©å±•

### ğŸ”— åç«¯æ¥å£å…¼å®¹æ€§
- âœ… Supabase Edge Functionsæ”¯æŒ
- âœ… å­—æ®µå‘½åè§„èŒƒä¸€è‡´(snake_case)
- âœ… æ•°æ®ç±»å‹æ˜ å°„æ­£ç¡®

### ğŸ–¥ï¸ å‰ç«¯ç³»ç»Ÿå…¼å®¹æ€§
- âœ… TypeScriptæ¥å£å®šä¹‰åŒ¹é…
- âœ… ç°æœ‰ç»„ä»¶å¯æ­£ç¡®æ˜¾ç¤º
- âœ… ä¸ç°æœ‰APIæ¥å£å®Œå…¨å…¼å®¹

## ğŸš€ ä½¿ç”¨å»ºè®®

1. **æµ‹è¯•å·¥ä½œæµ**: ä½¿ç”¨æä¾›çš„curlå‘½ä»¤æµ‹è¯•åŸºæœ¬åŠŸèƒ½
2. **éªŒè¯æ•°æ®**: æ£€æŸ¥Supabaseä¸­çš„æ•°æ®æ˜¯å¦æ­£ç¡®ä¿å­˜
3. **å‰ç«¯é›†æˆ**: åœ¨å‰ç«¯è°ƒç”¨Webhook URLè¿›è¡Œæ–‡ä»¶ä¸Šä¼ 
4. **ç›‘æ§æ—¥å¿—**: æŸ¥çœ‹n8næ‰§è¡Œæ—¥å¿—ç¡®ä¿ç¨³å®šè¿è¡Œ

## ğŸ‰ æ€»ç»“

æ‚¨çš„n8næ™ºèƒ½CSVè§£æå·¥ä½œæµå·²ç»**å®Œå…¨é…ç½®æˆåŠŸ**ï¼

- âœ… **71ä¸ªå­—æ®µ**å…¨éƒ¨é…ç½®å®Œæˆ
- âœ… **7ä¸ªèŠ‚ç‚¹**æ­£ç¡®è¿æ¥
- âœ… **AIæ™ºèƒ½è§£æ**åŠŸèƒ½å®Œå¤‡
- âœ… **æ•°æ®åº“é›†æˆ**æ— ç¼å¯¹æ¥
- âœ… **ç³»ç»Ÿå…¼å®¹æ€§**å®Œå…¨ä¸€è‡´

ç°åœ¨æ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå·¥ä½œæµæ¥æ™ºèƒ½è§£æå­¦ç”Ÿæˆç»©CSVæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨ä¿å­˜åˆ°æ‚¨çš„å­¦ç”Ÿç”»åƒç³»ç»Ÿä¸­ï¼ğŸŠ 