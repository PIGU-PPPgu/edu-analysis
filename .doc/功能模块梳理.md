# 学生画像系统功能模块梳理

## 已实现的功能模块

### 1. 用户认证模块
- **登录功能**: 提供电子邮箱和密码的登录界面
- **注册功能**: 新用户注册界面
- **服务条款和隐私政策**: 用户协议链接
- **权限管理**: 教师账号权限设置

### 2. 数据导入模块
- **学生信息导入**
  - 单个添加: 手动录入学生基本信息（学号、姓名、班级为必填，其他为选填）
  - 批量导入: 通过模板文件批量导入学生信息
  - 模板下载: 提供标准导入模板
- **成绩数据导入**
  - 单个添加成绩
  - 批量导入成绩数据
  - 查看学生列表功能

### 3. 作业管理模块
- **作业概览**: 显示总作业数、待批改数、关联班级数、已截止作业数
- **作业列表**: 显示所有作业，包含作业标题、班级、截止日期、状态等信息
- **作业发布**: 创建新作业功能
- **作业批改**: 批改学生提交的作业
- **批改设置**: 配置批改参数
- **班级筛选**: 按班级筛选作业
- **搜索功能**: 搜索特定作业

### 4. 成绩分析模块
- **数据看板**
  - 当前分析考试信息展示
  - 成绩概览（平均分、最高分、最低分、及格率）
  - 分数段分布（堆叠图、饼图）
  - 成绩分布箱线图
  - 成绩明细表格
- **班级分析**
- **学生进步**分析
- **高级分析**
- **交叉分析**
- **异常检测**
- **相关性分析**
- **班级箱线图**
- **贡献度分析**
- **考试筛选**: 选择待分析的考试
- **数据刷新**: 更新分析数据

### 5. 预警分析模块
- **预警概览**
  - 学生总数、风险学生数量与占比、高风险学生数量与占比、风险类型统计
  - 风险级别分布展示
  - 风险因素分析（影响因素分布图）
  - 班级风险分布
  - 预警类型分布（成绩预警、作业预警、参与度预警、行为预警）
- **AI分析**
- **学生预警列表**
  - 预警学生信息
  - 预警类型、风险级别、预警时间、详情
  - 预警状态管理（解决、忽略、重新激活）
  - 学生筛选（名称、班级、风险等级）
- **预警规则管理**
  - 规则列表显示
  - 创建新预警规则
  - 编辑/删除预警规则
  - 规则启用/禁用开关
  - 预设规则（连续不及格、成绩下降、出勤率、综合成绩等）

### 6. 学生画像模块
- **班级画像**
  - 班级列表展示
  - 班级信息展示（年级、人数）
  - 班级画像生成
- **小组画像**
- **学生画像**
- **班级筛选**: 通过搜索查找特定班级

### 7. 班级管理模块
- **班级列表与概览**: 展示班级及关键指标（平均分、优秀率等）
- **班级创建**: 添加新班级
- **班级筛选**: 按名称或年级进行筛选
- **班级排序**: 按不同条件排序班级

### 8. AI设置模块
- **AI模型配置**
  - AI提供商选择（豆包视觉、OpenAI等）
  - API密钥配置
  - API连接测试
  - 模型选择
- **AI分析范围设置**
  - 基础分析设置（成绩趋势、学科优势、基础能力、学习习惯）
  - 深度分析设置（学习风格、个性化建议、潜力预测、综合能力）
- **支持模型列表**
  - OpenAI模型
  - 豆包（火山方舟）模型
  - DeepSeek模型
  - 百川大模型
  - 通义千问模型
  - 其他模型

## 功能模块关联关系

### 数据流向关系
1. **数据导入 → 成绩分析**: 
   - 导入的学生信息和成绩数据被成绩分析模块使用进行各种图表和统计分析

2. **数据导入 → 班级管理**:
   - 导入学生信息时关联到特定班级，形成班级构成

3. **成绩分析 → 预警分析**:
   - 成绩数据用于生成学生预警，例如成绩下降、连续不及格等预警

4. **预警分析 → 学生画像**:
   - 预警信息成为学生画像的组成部分，反映学生的学习风险

5. **班级管理 → 作业管理**:
   - 班级信息被用于作业发布和管理，设置作业适用的班级范围

6. **成绩分析 → 学生画像**:
   - 成绩数据是生成学生画像的核心依据

### 功能依赖关系
1. **AI设置 → 多个模块**:
   - AI设置影响预警分析、学生画像、成绩分析等多个模块的AI分析能力

2. **用户认证 → 所有模块**:
   - 用户认证是访问所有其他功能模块的前提

3. **数据导入 → 所有分析模块**:
   - 所有分析功能依赖于准确的基础数据

### 交互关系
1. **班级管理 ⟷ 学生画像**:
   - 相互引用，从班级进入查看班级画像，从学生画像中可查看班级情况

2. **成绩分析 ⟷ 预警分析**:
   - 成绩分析中发现的异常可触发预警，预警分析中可查看相关成绩数据

3. **作业管理 ⟷ 成绩分析**:
   - 作业成绩可作为成绩分析的组成部分，成绩分析结果可能影响作业布置

## 技术实现关联

1. **前端组件关联**:
   - 共享UI组件: 所有模块使用统一的UI组件库，保持界面一致性
   - 数据可视化: 多个模块使用相同的图表库进行数据展示

2. **后端服务关联**:
   - 数据存储: Supabase数据库存储所有模块数据
   - Edge Functions: 实现成绩分析、学生画像生成等复杂功能

3. **AI服务关联**:
   - AI分析服务为多个模块提供智能分析能力
   - 通过代理请求模式，统一处理对AI服务的调用

## 已实现和待完善功能

### 已充分实现的功能
- 用户认证系统（登录、注册）
- 基础数据导入功能
- 作业管理基本功能
- 成绩数据展示
- 预警规则管理
- AI服务配置

### 正在完善的功能
- 成绩分析的高级分析功能
- 学生画像的个性化分析
- 预警分析的AI智能分析
- 班级管理的高级功能 