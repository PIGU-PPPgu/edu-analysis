# 🎮 Agent和Master系统调用参考文档

## 📋 系统概览

### 🤖 Agent系统
- **DataProcessor Agent**: 数据处理、转换、验证
- **Agent调度器**: 统一任务管理和调度

### 🎓 Master系统  
- **Knowledge Master**: 学生知识点掌握度管理 (`student_knowledge_mastery`)

---

## 🎯 Claude Code对话指令大全

### 📊 **数据处理Agent指令**

#### 基础数据处理
```
用DataProcessor处理这个CSV文件：[文件路径]，转换成JSON格式
用Agent处理Excel数据，需要清洗空值和重复项
批量处理students表数据，验证格式并导出
```

#### 实时数据流
```
启动实时Agent处理incoming数据流
用DataProcessor监控API数据流，每秒处理1000条
实时处理用户行为数据，检测异常模式
```

#### 数据转换和验证
```
用Agent验证这批数据的完整性和格式
转换grade_data表格式，从CSV到JSON
应用数据清洗规则：移除空值、标准化格式
```

#### 批量和定时任务
```
设置定时Agent任务，每小时处理一次数据
批量导入学生成绩数据，需要格式验证
用Agent处理大文件，分批处理避免内存溢出
```

### 🎓 **Knowledge Master指令**

#### 查询掌握度
```
查询学生[ID]的数学知识点掌握情况
显示班级[班级名]的物理知识点分布
分析高一年级所有学生的化学掌握度趋势
```

#### 更新掌握度
```
更新学生[ID]在[知识点]的掌握度为85%
批量更新班级学生的代数知识点评估
记录学生[ID]完成作业后的知识点变化
```

#### 统计分析
```
生成知识点掌握度报告给班级[班级名]
分析薄弱知识点，找出需要重点辅导的学生
统计各科目知识点的整体掌握情况
```

### 🔧 **系统管理指令**

#### 健康检查
```
检查所有Agent和Master的运行状态
显示系统健康状态和资源使用情况
Agent性能诊断，查看处理速度和成功率
```

#### 任务管理
```
查看当前所有pending的Agent任务
显示任务队列状态和优先级分布
取消Agent任务[任务ID]
```

#### 监控和统计
```
显示DataProcessor Agent的处理统计
查看Knowledge Master的数据库连接状态
生成系统性能报告，包含所有组件状态
```

---

## 💡 实际使用示例

### 📈 **数据处理场景**

**场景1: 导入学生成绩**
```
你说: "用DataProcessor处理这批期末成绩Excel文件，需要验证学号格式并转换成系统标准JSON"

Claude会:
1. 创建数据导入任务
2. 设置学号格式验证规则  
3. 执行Excel到JSON转换
4. 返回处理结果和验证报告
```

**场景2: 实时数据监控**
```
你说: "启动Agent监控作业提交数据流，检测异常提交模式"

Claude会:
1. 配置实时处理Agent
2. 设置异常检测规则
3. 开始监控数据流
4. 实时报告异常情况
```

### 🎓 **知识点管理场景**

**场景3: 掌握度分析**
```
你说: "分析高二3班学生的函数知识点掌握情况，找出需要补习的学生"

Claude会:
1. 查询班级学生列表
2. 获取函数知识点掌握数据
3. 分析掌握度分布
4. 识别薄弱学生并给出建议
```

**场景4: 批量更新**
```
你说: "根据最新考试结果，批量更新学生的三角函数掌握度"

Claude会:
1. 读取考试成绩数据
2. 计算知识点掌握度变化
3. 批量更新数据库记录
4. 生成更新报告
```

---

## 🚀 快速指令模板

### 📋 **常用指令格式**

| 操作类型 | 指令模板 | 示例 |
|---------|----------|------|
| **数据处理** | `用[Agent]处理[数据]，[要求]` | `用DataProcessor处理CSV文件，转JSON` |
| **知识查询** | `查询[对象]的[知识点][情况]` | `查询学生123的数学掌握情况` |
| **批量操作** | `批量[操作][数据]，[条件]` | `批量更新成绩数据，验证格式` |
| **状态检查** | `检查[系统][状态]` | `检查所有Agent运行状态` |
| **实时处理** | `启动[实时任务]，[参数]` | `启动实时数据监控，每秒1000条` |

### ⚡ **一键指令**

```bash
# 系统状态
检查系统状态
显示Agent列表
查看任务队列

# 数据处理
处理CSV数据
清洗数据格式
验证数据完整性

# 知识管理
查询掌握度
更新评估结果
生成分析报告

# 性能监控
显示处理统计
查看资源使用
生成性能报告
```

---

## 🔧 技术集成指南

### 📦 **代码中调用Agent**

```typescript
// 直接调用DataProcessor
import { DataProcessorAgent } from '@/services/ai/agents/DataProcessorAgent';

const agent = new DataProcessorAgent();
const result = await agent.executeTask(taskConfig);
```

### 🎓 **代码中调用Master**

```typescript
// 调用Knowledge Master
import { knowledgeService } from '@/services/education/knowledge';

const mastery = await knowledgeService.getStudentMastery(studentId);
```

### 🔄 **通过Claude Code调用**

```typescript
// 在对话中直接指令，Claude会自动:
// 1. 解析指令意图
// 2. 选择合适的Agent/Master
// 3. 执行任务并返回结果
// 4. 提供详细的执行报告
```

---

## 📝 注意事项

1. **数据安全**: Agent处理敏感数据时会自动加密
2. **性能优化**: 大批量任务会自动分批处理
3. **错误恢复**: 失败任务支持自动重试机制
4. **资源监控**: 系统会监控资源使用避免过载
5. **日志记录**: 所有操作都有完整的审计日志

---

## 🆘 故障排除

### 常见问题解决

| 问题 | 解决方案 |
|------|---------|
| Agent无响应 | `检查Agent状态` + `重启Agent服务` |
| 数据处理失败 | `查看错误日志` + `验证数据格式` |
| 知识点查询慢 | `检查数据库连接` + `优化查询条件` |
| 任务队列堵塞 | `查看队列状态` + `调整优先级` |

### 紧急指令

```bash
# 系统重置
重启所有Agent
清空任务队列
恢复默认配置

# 数据恢复
备份当前数据
恢复上次快照
验证数据完整性
```

---

**文档版本**: v1.0  
**最后更新**: 2024年12月  
**维护者**: Claude Code AI Assistant

📞 **技术支持**: 在对话中直接询问相关问题即可获得即时帮助！