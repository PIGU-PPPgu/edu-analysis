# ğŸš€ å­¦ç”Ÿç”»åƒç³»ç»Ÿé¡¹ç›®ä¼˜åŒ–æ€»ä½“è®¡åˆ’

> **åˆ›å»ºæ—¶é—´**: 2025-01-15  
> **ä¼˜åŒ–ç›®æ ‡**: ä»åŠŸèƒ½å®Œå–„æœŸè½¬å‘è´¨é‡ä¼˜åŒ–æœŸ  
> **æ‰§è¡Œæ–¹å¼**: 5ä¸ªAgentå¹¶è¡Œä½œä¸šï¼Œé¿å…å†²çª  
> **é¢„è®¡æ—¶é—´**: 2-3å‘¨  

## ğŸ“Š **ç°çŠ¶é—®é¢˜ä¸¥é‡æ€§è¯„ä¼°**

### ğŸ”´ **ä¸¥é‡é—®é¢˜**
- **é¡¹ç›®ç»“æ„æ··ä¹±**: 149ä¸ªæ ¹ç›®å½•æ–‡ä»¶ï¼Œ74ä¸ªä¿®å¤/è°ƒè¯•æ–‡ä»¶
- **æ•°æ®è´¨é‡ç¾éš¾**: å·²æ¸…ç†12,030æ¡åƒåœ¾æ•°æ®ï¼ˆ85%çš„æ•°æ®ï¼‰
- **ä»£ç è´¨é‡ä½ä¸‹**: console.logéå¸ƒï¼ŒTODOæ ‡è®°ï¼Œè°ƒè¯•ä»£ç æ®‹ç•™
- **ç”¨æˆ·ä½“éªŒç³Ÿç³•**: é”™è¯¯æç¤ºæŠ€æœ¯åŒ–ï¼ŒåŠ è½½çŠ¶æ€ä¸ä¸€è‡´

### ğŸŸ¡ **å¯æ§é—®é¢˜**
- åŠŸèƒ½æ¶æ„è®¾è®¡è‰¯å¥½ï¼Œæ™ºèƒ½å¯¼å…¥ç³»ç»Ÿå…ˆè¿›
- æŠ€æœ¯æ ˆé€‰æ‹©åˆç†ï¼Œç»„ä»¶åŒ–ç¨‹åº¦é«˜
- ä¸»è¦æ˜¯å·¥ç¨‹è´¨é‡é—®é¢˜ï¼Œéæ¶æ„é—®é¢˜

---

## ğŸ¯ **5-Agentå¹¶è¡Œä¼˜åŒ–æ–¹æ¡ˆ**

### **Agentåˆ†å·¥åŸåˆ™**
- âœ… **äº’ä¸å¹²æ‰°**: æ¯ä¸ªAgentè´Ÿè´£ç‹¬ç«‹æ¨¡å—
- âœ… **æ¥å£çº¦å®š**: ä¸¥æ ¼éµå¾ªç»Ÿä¸€ç±»å‹å®šä¹‰
- âœ… **éªŒæ”¶æ ‡å‡†**: æ¯æ­¥éƒ½æœ‰æ˜ç¡®çš„è¾“å‡ºè¦æ±‚
- âœ… **å†²çªé¿å…**: æ˜ç¡®çš„æ–‡ä»¶ä¿®æ”¹æƒé™åˆ’åˆ†

---

## ğŸ¤– **Agent-1: é¡¹ç›®ç»“æ„é‡æ„ä¸“å®¶**

### **èŒè´£èŒƒå›´**
- é¡¹ç›®æ–‡ä»¶ç»„ç»‡ + ä»£ç è§„èŒƒå»ºç«‹
- **ä¿®æ”¹æƒé™**: åªèƒ½ç§»åŠ¨/åˆ é™¤/ç»„ç»‡æ–‡ä»¶ï¼Œä¸èƒ½ä¿®æ”¹ç»„ä»¶å†…å®¹

### **é˜¶æ®µ1: æ ¹ç›®å½•æ¸…ç†ï¼ˆ2å°æ—¶ï¼‰**

#### ä»»åŠ¡æ¸…å•
```bash
âœ… åˆ›å»ºæ ‡å‡†ç›®å½•ç»“æ„ï¼š
   mkdir -p tools/{scripts,database,testing,documentation}
   mkdir -p temp/{archives,backup}
   mkdir -p docs/{api,user-guide,development}

âœ… ç§»åŠ¨æ–‡ä»¶åˆ†ç±»ï¼š
   # æ•°æ®åº“ç›¸å…³
   mv *.sql tools/database/
   mv database-*.* tools/database/
   
   # æµ‹è¯•è„šæœ¬
   mv test-*.* tools/testing/
   mv debug-*.* tools/testing/
   mv fix-*.* tools/testing/
   mv check-*.* tools/testing/
   
   # æ–‡æ¡£
   mv *.md docs/documentation/
   
   # ä¸´æ—¶æ–‡ä»¶
   mv *.csv temp/archives/
   mv *.log temp/archives/
   mv *.tmp temp/archives/

âœ… åˆ é™¤åƒåœ¾æ–‡ä»¶ï¼š
   rm -f pid.txt env.tmp server.log *.tsbuildinfo
   rm -f llms-full.txt offline-integration-test-report.json
```

#### éªŒæ”¶æ ‡å‡†
- æ ¹ç›®å½•æ–‡ä»¶æ•°é‡ < 30ä¸ª
- æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶å½’æ¡£
- ç›®å½•ç»“æ„æ¸…æ™°åˆç†

### **é˜¶æ®µ2: ä»£ç è§„èŒƒå»ºç«‹ï¼ˆ3å°æ—¶ï¼‰**

#### ç»Ÿä¸€æ¥å£å®šä¹‰æ–‡ä»¶
åˆ›å»º `src/types/standards.ts`:
```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†æ¥å£
export interface StandardError {
  code: string;
  message: string;
  details?: any;
  timestamp: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
}

// ç»Ÿä¸€ç»„ä»¶Propsæ¥å£
export interface BaseComponentProps {
  isLoading?: boolean;
  error?: StandardError | null;
  onError?: (error: StandardError) => void;
  className?: string;
}

// ç»Ÿä¸€APIå“åº”æ¥å£
export interface APIResponse<T> {
  data: T | null;
  error: StandardError | null;
  meta?: {
    total?: number;
    page?: number;
    pageSize?: number;
    hasMore?: boolean;
  };
}

// ç»Ÿä¸€åŠ è½½çŠ¶æ€æ¥å£
export interface LoadingState {
  isLoading: boolean;
  loadingMessage?: string;
  progress?: number;
}
```

#### é¡¹ç›®é…ç½®ä¼˜åŒ–
```bash
# ESLintè§„åˆ™å¼ºåŒ–
# Prettieré…ç½®ç»Ÿä¸€
# TypeScripté…ç½®ä¼˜åŒ–
# ä¾èµ–æ¸…ç†ä¼˜åŒ–
```

---

## ğŸ—„ï¸ **Agent-2: æ•°æ®å±‚ä¼˜åŒ–ä¸“å®¶**

### **èŒè´£èŒƒå›´**
- æ•°æ®åº“ç±»å‹å®šä¹‰ + APIæ¥å£æ ‡å‡†åŒ– + æ•°æ®æœåŠ¡å±‚
- **ä¿®æ”¹æƒé™**: åªèƒ½ä¿®æ”¹ `types/`, `integrations/`, `lib/` ç›®å½•

### **é˜¶æ®µ1: ç±»å‹å®šä¹‰å®Œå–„ï¼ˆ2å°æ—¶ï¼‰**

#### è¡¥å……å®Œæ•´æ•°æ®åº“ç±»å‹
æ›´æ–° `src/types/database.ts`:
```typescript
// è¡¥å……ç¼ºå¤±çš„æ ¸å¿ƒè¡¨ç±»å‹
export interface GradeData {
  id: string;
  exam_id: string;
  student_id: string;
  name: string;
  class_name: string;
  subject: string;
  score: number;
  total_score?: number;
  grade?: string;
  rank_in_class?: number;
  rank_in_grade?: number;
  rank_in_school?: number;
  grade_level?: string;
  subject_total_score?: number;
  percentile?: number;
  z_score?: number;
  is_analyzed?: boolean;
  analyzed_at?: string;
  exam_title?: string;
  exam_type?: string;
  exam_date?: string;
  exam_scope?: 'class' | 'grade' | 'school';
  metadata?: Record<string, any>;
  created_at: string;
  updated_at: string;
}

export interface Student {
  id: string;
  student_id: string;
  name: string;
  class_id?: string;
  class_name?: string;
  grade?: string;
  gender?: 'ç”·' | 'å¥³' | 'å…¶ä»–';
  admission_year?: string;
  contact_phone?: string;
  contact_email?: string;
  user_id?: string;
  metadata?: Record<string, any>;
  created_at: string;
  updated_at: string;
}

export interface Exam {
  id: string;
  title: string;
  type: string;
  date: string;
  subject?: string;
  scope: 'class' | 'grade' | 'school';
  created_by?: string;
  created_at: string;
  updated_at: string;
}

export interface ClassInfo {
  class_name: string;
  grade_level: string;
  academic_year: string;
  homeroom_teacher?: string;
  student_count?: number;
  department?: string;
  created_at: string;
  updated_at: string;
}
```

### **é˜¶æ®µ2: APIæ¥å£æ ‡å‡†åŒ–ï¼ˆ3å°æ—¶ï¼‰**

#### ç»Ÿä¸€APIå®¢æˆ·ç«¯
åˆ›å»º `src/lib/api/client.ts`:
```typescript
import { supabase } from '@/integrations/supabase/client';
import type { APIResponse, StandardError } from '@/types/standards';

export class APIClient {
  private handleError(error: any): StandardError {
    return {
      code: error.code || 'UNKNOWN_ERROR',
      message: error.message || 'æœªçŸ¥é”™è¯¯',
      details: error.details,
      timestamp: new Date().toISOString(),
      severity: error.status >= 500 ? 'critical' : 'medium'
    };
  }

  async get<T>(table: string, query?: any): Promise<APIResponse<T[]>> {
    try {
      let supabaseQuery = supabase.from(table).select('*');
      
      if (query?.filter) {
        // åº”ç”¨è¿‡æ»¤æ¡ä»¶
      }
      
      const { data, error } = await supabaseQuery;
      
      if (error) {
        return { data: null, error: this.handleError(error) };
      }
      
      return { data: data as T[], error: null };
    } catch (error) {
      return { data: null, error: this.handleError(error) };
    }
  }

  async post<T>(table: string, data: any): Promise<APIResponse<T>> {
    try {
      const { data: result, error } = await supabase
        .from(table)
        .insert(data)
        .select()
        .single();
      
      if (error) {
        return { data: null, error: this.handleError(error) };
      }
      
      return { data: result as T, error: null };
    } catch (error) {
      return { data: null, error: this.handleError(error) };
    }
  }
}
```

#### æ•°æ®æœåŠ¡å±‚
åˆ›å»º `src/lib/api/services/`:
```typescript
// gradeService.ts
export class GradeDataService extends APIClient {
  async getGradesByExam(examId: string): Promise<APIResponse<GradeData[]>>
  async getStudentGrades(studentId: string): Promise<APIResponse<GradeData[]>>
  async importGrades(data: ImportGradeData): Promise<APIResponse<ImportResult>>
  async analyzeGrades(examId: string): Promise<APIResponse<AnalysisResult>>
}

// studentService.ts  
export class StudentService extends APIClient {
  async getStudents(classId?: string): Promise<APIResponse<Student[]>>
  async createStudent(student: CreateStudentData): Promise<APIResponse<Student>>
  async updateStudent(id: string, data: UpdateStudentData): Promise<APIResponse<Student>>
  async deleteStudent(id: string): Promise<APIResponse<void>>
}
```

---

## ğŸ¨ **Agent-3: UIç»„ä»¶æ ‡å‡†åŒ–ä¸“å®¶**

### **èŒè´£èŒƒå›´**
- ç»„ä»¶è§„èŒƒå»ºç«‹ + é”™è¯¯å¤„ç†ç»Ÿä¸€ + åŠ è½½çŠ¶æ€æ ‡å‡†åŒ–
- **ä¿®æ”¹æƒé™**: åªèƒ½ä¿®æ”¹ `components/ui/`, `components/shared/` ç›®å½•

### **é˜¶æ®µ1: åŸºç¡€ç»„ä»¶å»ºç«‹ï¼ˆ2å°æ—¶ï¼‰**

#### ç»Ÿä¸€é”™è¯¯å¤„ç†ç»„ä»¶
åˆ›å»º `src/components/ui/error/`:
```typescript
// ErrorBoundary.tsx
export class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {
  constructor(props: ErrorBoundaryProps) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error: Error): ErrorBoundaryState {
    return {
      hasError: true,
      error: {
        code: 'COMPONENT_ERROR',
        message: error.message,
        details: error.stack,
        timestamp: new Date().toISOString(),
        severity: 'high'
      }
    };
  }

  render() {
    if (this.state.hasError) {
      return <ErrorDisplay error={this.state.error} />;
    }
    return this.props.children;
  }
}

// ErrorDisplay.tsx
export const ErrorDisplay: React.FC<{error: StandardError}> = ({error}) => {
  const getUserFriendlyMessage = (error: StandardError) => {
    const errorMessages = {
      'NETWORK_ERROR': 'ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®',
      'DATA_NOT_FOUND': 'æœªæ‰¾åˆ°ç›¸å…³æ•°æ®',
      'PERMISSION_DENIED': 'æƒé™ä¸è¶³ï¼Œè¯·è”ç³»ç®¡ç†å‘˜',
      'VALIDATION_ERROR': 'æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥è¾“å…¥',
      'SERVER_ERROR': 'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•'
    };
    return errorMessages[error.code] || error.message;
  };

  return (
    <Alert variant={error.severity === 'critical' ? 'destructive' : 'default'}>
      <AlertTriangle className="h-4 w-4" />
      <AlertTitle>æ“ä½œå¤±è´¥</AlertTitle>
      <AlertDescription>
        {getUserFriendlyMessage(error)}
        {error.severity === 'low' && (
          <Button variant="outline" size="sm" className="mt-2" onClick={() => window.location.reload()}>
            é‡è¯•
          </Button>
        )}
      </AlertDescription>
    </Alert>
  );
};
```

#### ç»Ÿä¸€åŠ è½½çŠ¶æ€ç»„ä»¶
```typescript
// LoadingSpinner.tsx
export const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({
  size = 'md',
  message = 'åŠ è½½ä¸­...',
  progress
}) => {
  return (
    <div className="flex flex-col items-center justify-center py-8">
      <div className={`animate-spin rounded-full border-b-2 border-primary ${sizeClasses[size]}`} />
      <p className="mt-2 text-sm text-muted-foreground">{message}</p>
      {progress !== undefined && (
        <div className="mt-2 w-full max-w-xs">
          <Progress value={progress} />
          <p className="text-xs text-center mt-1">{Math.round(progress)}%</p>
        </div>
      )}
    </div>
  );
};

// EmptyState.tsx
export const EmptyState: React.FC<EmptyStateProps> = ({
  icon: Icon = Database,
  title = 'æš‚æ— æ•°æ®',
  description = 'å½“å‰æ²¡æœ‰ç›¸å…³æ•°æ®',
  action
}) => {
  return (
    <div className="flex flex-col items-center justify-center py-12">
      <Icon className="h-12 w-12 text-muted-foreground/50 mb-4" />
      <h3 className="text-lg font-semibold text-muted-foreground mb-2">{title}</h3>
      <p className="text-sm text-muted-foreground mb-4 text-center max-w-sm">{description}</p>
      {action}
    </div>
  );
};
```

### **é˜¶æ®µ2: ç»„ä»¶è§„èŒƒé‡æ„ï¼ˆ4å°æ—¶ï¼‰**

#### æ ‡å‡†ç»„ä»¶æ¨¡å¼
```typescript
// å¿…é¡»éµå¾ªçš„ç»„ä»¶æ¨¡å¼
export const StandardComponent: React.FC<ComponentProps> = ({
  isLoading = false,
  error = null,
  onError,
  className,
  ...props
}) => {
  // é”™è¯¯å¤„ç†
  if (error) {
    return <ErrorDisplay error={error} />;
  }

  // åŠ è½½çŠ¶æ€
  if (isLoading) {
    return <LoadingSpinner message="æ­£åœ¨åŠ è½½æ•°æ®..." />;
  }

  // æ­£å¸¸å†…å®¹
  return (
    <div className={cn("component-container", className)}>
      {/* ç»„ä»¶å†…å®¹ */}
    </div>
  );
};
```

#### æ¸…ç†ä»»åŠ¡æ¸…å•
```bash
âœ… åˆ é™¤æ‰€æœ‰ç»„ä»¶ä¸­çš„ console.log
âœ… åˆ é™¤æ‰€æœ‰ renderDebugInfo å‡½æ•°
âœ… åˆ é™¤æ‰€æœ‰ TODO æ ‡è®°
âœ… ç»Ÿä¸€é”™è¯¯çŠ¶æ€å¤„ç†
âœ… ç»Ÿä¸€åŠ è½½çŠ¶æ€å¤„ç†
âœ… ç»Ÿä¸€ç©ºæ•°æ®çŠ¶æ€å¤„ç†
```

---

## ğŸ“Š **Agent-4: æˆç»©åˆ†ææ¨¡å—ä¼˜åŒ–ä¸“å®¶**

### **èŒè´£èŒƒå›´**
- åˆ†æåŠŸèƒ½ä¼˜åŒ– + å›¾è¡¨ç»„ä»¶æ ‡å‡†åŒ– + æ•°æ®å¤„ç†ä¼˜åŒ–
- **ä¿®æ”¹æƒé™**: åªèƒ½ä¿®æ”¹ `components/analysis/` ç›®å½•

### **é˜¶æ®µ1: åˆ†æç»„ä»¶æ¥å£ç»Ÿä¸€ï¼ˆ2å°æ—¶ï¼‰**

#### æ ‡å‡†åˆ†æç»„ä»¶æ¥å£
```typescript
// åŸºç¡€åˆ†æç»„ä»¶æ¥å£
export interface AnalysisComponentProps extends BaseComponentProps {
  examId: string;
  classId?: string;
  subjectId?: string;
  dateRange?: {
    start: string;
    end: string;
  };
  refreshTrigger?: number;
  onDataChange?: (data: any) => void;
}

// å›¾è¡¨ç»„ä»¶æ¥å£
export interface ChartComponentProps extends AnalysisComponentProps {
  data: any[];
  chartType: 'bar' | 'line' | 'pie' | 'boxplot' | 'heatmap';
  height?: number;
  responsive?: boolean;
  showLegend?: boolean;
  showTooltip?: boolean;
}

// æ•°æ®åˆ†æç»“æœæ¥å£
export interface AnalysisResult {
  id: string;
  type: 'distribution' | 'trend' | 'comparison' | 'correlation';
  data: any;
  metadata: {
    generatedAt: string;
    dataSource: string;
    sampleSize: number;
    confidence?: number;
  };
  insights: string[];
  recommendations: string[];
}
```

### **é˜¶æ®µ2: æ•°æ®å¤„ç†ä¼˜åŒ–ï¼ˆ3å°æ—¶ï¼‰**

#### ç»Ÿä¸€æ•°æ®å¤„ç†æœåŠ¡
```typescript
// åˆ†ææ•°æ®å¤„ç†å™¨
export class AnalysisDataProcessor {
  async processGradeDistribution(
    gradeData: GradeData[]
  ): Promise<{
    distribution: ChartData[];
    statistics: {
      mean: number;
      median: number;
      mode: number;
      standardDeviation: number;
      percentiles: Record<string, number>;
    };
  }> {
    // å®ç°åˆ†æ•°åˆ†å¸ƒå¤„ç†
  }

  async calculateCorrelation(
    subjects: string[],
    gradeData: GradeData[]
  ): Promise<{
    correlationMatrix: number[][];
    subjectLabels: string[];
    significanceLevel: number;
  }> {
    // å®ç°ç›¸å…³æ€§åˆ†æ
  }

  async detectAnomalies(
    gradeData: GradeData[]
  ): Promise<{
    anomalies: Array<{
      studentId: string;
      subjectId: string;
      score: number;
      expectedScore: number;
      anomalyType: 'outlier' | 'sudden_drop' | 'sudden_increase';
      severity: number;
    }>;
    summary: {
      totalAnomalies: number;
      highSeverityCount: number;
    };
  }> {
    // å®ç°å¼‚å¸¸æ£€æµ‹
  }
}
```

#### ç»„ä»¶ä¼˜åŒ–ä»»åŠ¡
```bash
âœ… åˆ é™¤æ‰€æœ‰æ¨¡æ‹Ÿæ•°æ®ä¾èµ–
âœ… ç»Ÿä¸€æ•°æ®è·å–é€»è¾‘
âœ… ä¼˜åŒ–å›¾è¡¨æ¸²æŸ“æ€§èƒ½
âœ… ä¿®å¤æ•°æ®ä¸€è‡´æ€§é—®é¢˜
âœ… æ”¹è¿›ç”¨æˆ·äº¤äº’ä½“éªŒ
âœ… æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½
âœ… ä¼˜åŒ–å“åº”å¼å¸ƒå±€
```

### **é˜¶æ®µ3: ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆ2å°æ—¶ï¼‰**

#### ç”¨æˆ·ä½“éªŒæ”¹è¿›æ¸…å•
```typescript
// å‹å¥½çš„æç¤ºä¿¡æ¯
const USER_MESSAGES = {
  NO_DATA: 'æš‚æ— è€ƒè¯•æ•°æ®ï¼Œè¯·å…ˆå¯¼å…¥æˆç»©ä¿¡æ¯',
  LOADING_ANALYSIS: 'æ­£åœ¨åˆ†ææˆç»©æ•°æ®ï¼Œè¯·ç¨å€™...',
  EXPORT_SUCCESS: 'æ•°æ®å¯¼å‡ºæˆåŠŸï¼Œè¯·æŸ¥çœ‹ä¸‹è½½æ–‡ä»¶',
  ANALYSIS_COMPLETE: 'åˆ†æå®Œæˆï¼Œå‘ç°äº†ä¸€äº›æœ‰è¶£çš„æ¨¡å¼',
  ERROR_RETRY: 'æ•°æ®åŠ è½½å¤±è´¥ï¼Œç‚¹å‡»é‡è¯•'
};

// æ“ä½œå¼•å¯¼
const HELP_TOOLTIPS = {
  CORRELATION_CHART: 'è¿™ä¸ªå›¾è¡¨æ˜¾ç¤ºå„ç§‘ç›®æˆç»©ä¹‹é—´çš„å…³è”ç¨‹åº¦ï¼Œæ•°å€¼è¶Šæ¥è¿‘1è¡¨ç¤ºå…³è”æ€§è¶Šå¼º',
  BOXPLOT_ANALYSIS: 'ç®±çº¿å›¾æ˜¾ç¤ºæˆç»©åˆ†å¸ƒæƒ…å†µï¼Œä¸­é—´çº¿ä¸ºä¸­ä½æ•°ï¼Œæ–¹æ¡†è¡¨ç¤º50%å­¦ç”Ÿçš„æˆç»©èŒƒå›´',
  ANOMALY_DETECTION: 'å¼‚å¸¸æ£€æµ‹å¸®åŠ©è¯†åˆ«æˆç»©æ³¢åŠ¨è¾ƒå¤§çš„å­¦ç”Ÿï¼Œä¾¿äºåŠæ—¶å…³æ³¨'
};
```

---

## âš¡ **Agent-5: æ€§èƒ½ç›‘æ§ä¼˜åŒ–ä¸“å®¶**

### **èŒè´£èŒƒå›´**
- æ€§èƒ½ç›‘æ§ + ä¼˜åŒ–å®æ–½ + éƒ¨ç½²é…ç½®
- **ä¿®æ”¹æƒé™**: åªèƒ½æ·»åŠ ç›‘æ§ä»£ç ï¼Œä¸èƒ½ä¿®æ”¹ä¸šåŠ¡é€»è¾‘

### **é˜¶æ®µ1: æ€§èƒ½ç›‘æ§å»ºç«‹ï¼ˆ2å°æ—¶ï¼‰**

#### æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
```typescript
// æ€§èƒ½ç›‘æ§æœåŠ¡
export class PerformanceMonitor {
  private metrics: Map<string, number[]> = new Map();
  
  // ç»„ä»¶æ¸²æŸ“æ€§èƒ½ç›‘æ§
  trackComponentRender(componentName: string, renderTime: number): void {
    if (!this.metrics.has(componentName)) {
      this.metrics.set(componentName, []);
    }
    this.metrics.get(componentName)!.push(renderTime);
    
    // å¦‚æœæ¸²æŸ“æ—¶é—´è¶…è¿‡é˜ˆå€¼ï¼Œè®°å½•è­¦å‘Š
    if (renderTime > 100) {
      console.warn(`æ…¢æ¸²æŸ“è­¦å‘Š: ${componentName} è€—æ—¶ ${renderTime}ms`);
    }
  }

  // APIè°ƒç”¨æ€§èƒ½ç›‘æ§
  trackAPICall(endpoint: string, duration: number, success: boolean): void {
    const key = `api_${endpoint}`;
    if (!this.metrics.has(key)) {
      this.metrics.set(key, []);
    }
    this.metrics.get(key)!.push(duration);
    
    if (duration > 3000) {
      console.warn(`æ…¢APIè­¦å‘Š: ${endpoint} è€—æ—¶ ${duration}ms`);
    }
  }

  // é”™è¯¯ç»Ÿè®¡ç›‘æ§
  trackError(error: StandardError, context: string): void {
    const errorKey = `error_${error.code}`;
    console.error(`é”™è¯¯ç›‘æ§: ${errorKey} in ${context}`, error);
  }

  // ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
  generateReport(): PerformanceReport {
    const report: PerformanceReport = {
      componentMetrics: {},
      apiMetrics: {},
      errorSummary: {},
      recommendations: []
    };

    // åˆ†æç»„ä»¶æ€§èƒ½
    this.metrics.forEach((times, component) => {
      if (component.startsWith('api_')) return;
      
      const avgTime = times.reduce((a, b) => a + b, 0) / times.length;
      report.componentMetrics[component] = {
        averageRenderTime: avgTime,
        maxRenderTime: Math.max(...times),
        renderCount: times.length
      };

      if (avgTime > 50) {
        report.recommendations.push(`${component} ç»„ä»¶æ¸²æŸ“è¾ƒæ…¢ï¼Œå»ºè®®ä¼˜åŒ–`);
      }
    });

    return report;
  }
}
```

### **é˜¶æ®µ2: æ€§èƒ½ä¼˜åŒ–å®æ–½ï¼ˆ3å°æ—¶ï¼‰**

#### Reactæ€§èƒ½ä¼˜åŒ–
```typescript
// å¿…é¡»å®æ–½çš„ä¼˜åŒ–æªæ–½
âœ… React.memo() ä¼˜åŒ–ï¼šå¯¹æ‰€æœ‰çº¯å±•ç¤ºç»„ä»¶ä½¿ç”¨memo
âœ… useMemo() ä¼˜åŒ–ï¼šå¯¹æ˜‚è´µè®¡ç®—ä½¿ç”¨memoç¼“å­˜
âœ… useCallback() ä¼˜åŒ–ï¼šå¯¹ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°ä½¿ç”¨callback
âœ… è™šæ‹Ÿæ»šåŠ¨ï¼šå¯¹å¤§æ•°æ®åˆ—è¡¨ä½¿ç”¨react-window
âœ… å›¾ç‰‡æ‡’åŠ è½½ï¼šä½¿ç”¨IntersectionObserver
âœ… ä»£ç åˆ†å‰²ï¼šå¯¹è·¯ç”±ç»„ä»¶ä½¿ç”¨React.lazy
âœ… Bundleä¼˜åŒ–ï¼šåˆ†æå’Œä¼˜åŒ–æ‰“åŒ…ä½“ç§¯

// æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹
const OptimizedAnalysisComponent = React.memo(({ data, onDataChange }: Props) => {
  // ä½¿ç”¨useMemoç¼“å­˜æ˜‚è´µè®¡ç®—
  const processedData = useMemo(() => {
    return expensiveDataProcessing(data);
  }, [data]);

  // ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
  const handleDataChange = useCallback((newData: any) => {
    onDataChange?.(newData);
  }, [onDataChange]);

  return (
    <div>
      {/* ç»„ä»¶å†…å®¹ */}
    </div>
  );
});
```

#### ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
```typescript
// React Queryé…ç½®ä¼˜åŒ–
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿ
      cacheTime: 10 * 60 * 1000, // 10åˆ†é’Ÿ
      refetchOnWindowFocus: false,
      refetchOnMount: true,
      retry: 2
    }
  }
});

// æ™ºèƒ½é¢„åŠ è½½
const usePreloadData = () => {
  const queryClient = useQueryClient();
  
  const preloadExamData = useCallback((examId: string) => {
    queryClient.prefetchQuery(['exam', examId], () => fetchExamData(examId));
  }, [queryClient]);

  return { preloadExamData };
};
```

---

## ğŸ” **å†²çªé¿å…ä¸åè°ƒæœºåˆ¶**

### **æ–‡ä»¶ä¿®æ”¹æƒé™ä¸¥æ ¼åˆ’åˆ†**
```bash
Agent-1: åªèƒ½ç§»åŠ¨/åˆ é™¤/ç»„ç»‡æ–‡ä»¶ï¼Œä¸èƒ½ä¿®æ”¹ä»£ç å†…å®¹
Agent-2: åªèƒ½ä¿®æ”¹ types/, integrations/, lib/ ç›®å½•
Agent-3: åªèƒ½ä¿®æ”¹ components/ui/, components/shared/ ç›®å½•  
Agent-4: åªèƒ½ä¿®æ”¹ components/analysis/ ç›®å½•
Agent-5: åªèƒ½æ·»åŠ ç›‘æ§ä»£ç ï¼Œä¸èƒ½ä¿®æ”¹ä¸šåŠ¡é€»è¾‘
```

### **é”å®šçš„æ ¸å¿ƒæ¥å£**
```typescript
// ğŸ”’ ä»»ä½•Agentéƒ½ä¸èƒ½ä¿®æ”¹çš„æ¥å£
export const LOCKED_INTERFACES = {
  StandardError: 'ç»Ÿä¸€é”™è¯¯å¤„ç†æ¥å£ - ç¦æ­¢ä¿®æ”¹',
  BaseComponentProps: 'åŸºç¡€ç»„ä»¶æ¥å£ - ç¦æ­¢ä¿®æ”¹', 
  APIResponse: 'APIå“åº”æ¥å£ - ç¦æ­¢ä¿®æ”¹',
  Database: 'æ•°æ®åº“ç±»å‹ - åªèƒ½æ–°å¢ï¼Œä¸èƒ½ä¿®æ”¹ç°æœ‰å­—æ®µ'
} as const;
```

### **éªŒæ”¶æ ‡å‡†æ£€æŸ¥æ¸…å•**
```bash
æ¯ä¸ªAgentå®Œæˆåå¿…é¡»é€šè¿‡ï¼š
âœ… TypeScriptç¼–è¯‘æ— é”™è¯¯ (tsc --noEmit)
âœ… ESLintæ£€æŸ¥é€šè¿‡ (eslint src --ext .ts,.tsx)
âœ… æµ‹è¯•ç”¨ä¾‹é€šè¿‡ (npm test)
âœ… æ„å»ºæˆåŠŸ (npm run build)
âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ (Lighthouse Score > 90)
âœ… æ¥å£ä¸€è‡´æ€§éªŒè¯é€šè¿‡
```

---

## ğŸ“… **æ‰§è¡Œæ—¶é—´è¡¨**

### **ç¬¬1è½®ï¼šåŸºç¡€è®¾æ–½å»ºè®¾ï¼ˆå¹¶è¡Œï¼Œç¬¬1-2å¤©ï¼‰**
- **Agent-1**: é¡¹ç›®ç»“æ„é‡æ„ï¼ˆ5å°æ—¶ï¼‰
- **Agent-2**: æ•°æ®å±‚ä¼˜åŒ–ï¼ˆ5å°æ—¶ï¼‰

### **ç¬¬2è½®ï¼šUIå’Œä¸šåŠ¡ä¼˜åŒ–ï¼ˆå¹¶è¡Œï¼Œç¬¬3-5å¤©ï¼‰**  
- **Agent-3**: UIç»„ä»¶æ ‡å‡†åŒ–ï¼ˆ6å°æ—¶ï¼‰
- **Agent-4**: æˆç»©åˆ†ææ¨¡å—ä¼˜åŒ–ï¼ˆ7å°æ—¶ï¼‰

### **ç¬¬3è½®ï¼šæ€§èƒ½å’Œéƒ¨ç½²ï¼ˆç¬¬6-7å¤©ï¼‰**
- **Agent-5**: æ€§èƒ½ç›‘æ§ä¼˜åŒ–ï¼ˆ5å°æ—¶ï¼‰
- **é›†æˆæµ‹è¯•**: å…¨é¢éªŒæ”¶æµ‹è¯•ï¼ˆ3å°æ—¶ï¼‰

---

## ğŸ¯ **é¢„æœŸæˆæœ**

### **è´¨é‡æŒ‡æ ‡æå‡**
- **ä»£ç è´¨é‡**: ESLinté”™è¯¯ä»100+é™åˆ°0
- **TypeScript**: ç±»å‹è¦†ç›–ç‡ä»60%æå‡åˆ°95%
- **æ€§èƒ½**: é¡µé¢åŠ è½½æ—¶é—´å‡å°‘50%
- **ç”¨æˆ·ä½“éªŒ**: é”™è¯¯ç‡å‡å°‘80%

### **é¡¹ç›®çŠ¶æ€æ”¹å–„**
- **æ–‡ä»¶æ•°é‡**: æ ¹ç›®å½•ä»149ä¸ªæ–‡ä»¶å‡å°‘åˆ°30ä¸ªä»¥ä¸‹
- **ä»£ç è§„èŒƒ**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
- **æ¶æ„æ¸…æ™°**: æ˜ç¡®çš„æ¨¡å—è¾¹ç•Œå’Œæ¥å£å®šä¹‰
- **å¯ç»´æŠ¤æ€§**: æŠ€æœ¯å€ºåŠ¡æ¸…é›¶ï¼Œå¼€å‘æ•ˆç‡æå‡

---

## ğŸš¨ **æ‰§è¡Œæ³¨æ„äº‹é¡¹**

1. **ä¸¥æ ¼æŒ‰ç…§Agentåˆ†å·¥æ‰§è¡Œï¼Œé¿å…äº¤å‰ä¿®æ”¹**
2. **æ‰€æœ‰æ¥å£å˜æ›´å¿…é¡»å…ˆæ›´æ–°æ–‡æ¡£ï¼Œå†ä¿®æ”¹ä»£ç **
3. **æ¯å®Œæˆä¸€ä¸ªé˜¶æ®µç«‹å³è¿›è¡ŒéªŒæ”¶æµ‹è¯•**
4. **å‘ç°å†²çªç«‹å³åœæ­¢ï¼Œåè°ƒè§£å†³åç»§ç»­**
5. **ä¿æŒé¢‘ç¹çš„ä»£ç æäº¤ï¼Œä¾¿äºå›æ»š**

---

**å¼€å§‹æ‰§è¡Œå‰ï¼Œè¯·ç¡®è®¤æ‰€æœ‰Agentéƒ½ç†è§£è‡ªå·±çš„èŒè´£è¾¹ç•Œå’ŒéªŒæ”¶æ ‡å‡†ï¼** 