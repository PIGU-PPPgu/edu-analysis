# n8nå·¥ä½œæµæµ‹è¯•æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

**æµ‹è¯•æ—¶é—´**: 2025å¹´6æœˆ15æ—¥  
**å·¥ä½œæµID**: FppT8sCsSxcUnNnj  
**å·¥ä½œæµåç§°**: ç®€åŒ–CSVè§£æ  
**æµ‹è¯•ç›®æ ‡**: éªŒè¯CSVæ–‡ä»¶ä¸Šä¼ å’Œæ•°æ®å¤„ç†åŠŸèƒ½

## ğŸ§ª æµ‹è¯•ç»“æœ

### âœ… æˆåŠŸé¡¹ç›®

1. **n8næœåŠ¡çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ
   - æœåŠ¡åœ°å€: http://localhost:5678
   - å¥åº·æ£€æŸ¥: é€šè¿‡

2. **Webhookå“åº”**: âœ… æ­£å¸¸å“åº”
   - URL: http://localhost:5678/webhook/csv-upload
   - çŠ¶æ€ç : 200
   - å“åº”æ—¶é—´: ~100ms
   - æ–‡ä»¶æ¥æ”¶: æˆåŠŸ

3. **æ•°æ®åº“è¿æ¥**: âœ… æ­£å¸¸
   - Supabaseè¿æ¥: æ­£å¸¸
   - æ•°æ®æŸ¥è¯¢: æˆåŠŸ
   - ç°æœ‰æ•°æ®: ç¡®è®¤å­˜åœ¨

### âŒ é—®é¢˜é¡¹ç›®

1. **APIå¯†é’¥è®¤è¯**: âŒ å¤±è´¥
   - å·¥ä½œæµçŠ¶æ€æŸ¥è¯¢: 401 Unauthorized
   - æ‰§è¡Œå†å²æŸ¥è¯¢: éœ€è¦APIå¯†é’¥
   - å·¥ä½œæµæ¿€æ´»: è®¤è¯å¤±è´¥

2. **Webhookæ³¨å†Œ**: âš ï¸ éƒ¨åˆ†é—®é¢˜
   - æµ‹è¯•æ¨¡å¼webhook: 404é”™è¯¯
   - æç¤ºéœ€è¦æ‰‹åŠ¨æ‰§è¡Œå·¥ä½œæµæ¥æ¿€æ´»webhook

## ğŸ“Š æµ‹è¯•æ•°æ®

### æµ‹è¯•æ–‡ä»¶
- **æ–‡ä»¶å**: 907ä¹ä¸‹æœˆè€ƒæˆç»©.csv
- **æ–‡ä»¶å¤§å°**: 8,232 bytes
- **æ ¼å¼**: CSV (UTF-8ç¼–ç )
- **è®°å½•æ•°**: 47æ¡å­¦ç”Ÿæˆç»©è®°å½•

### æ•°æ®åº“çŠ¶æ€
```sql
-- æœ€æ–°æˆç»©è®°å½•
SELECT name, class_name, subject, score, created_at 
FROM grade_data 
ORDER BY created_at DESC 
LIMIT 5;
```

ç»“æœæ˜¾ç¤ºæ•°æ®åº“ä¸­æœ‰ç°æœ‰æ•°æ®ï¼Œä½†æµ‹è¯•æœŸé—´æ²¡æœ‰æ–°å¢è®°å½•ã€‚

## ğŸ”§ é—®é¢˜åˆ†æ

### 1. APIå¯†é’¥é—®é¢˜
å½“å‰ä½¿ç”¨çš„APIå¯†é’¥å¯èƒ½å·²è¿‡æœŸæˆ–æƒé™ä¸è¶³ï¼š
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNzY0NTFkYy1jNGJjLTQ1M2ItOTBhNy05MTU1YjYzZTQ0MzkiLCJpc3MiOiJuOG4iLCJhdWQiOiJwdWJsaWMtYXBpIiwiaWF0IjoxNzQ5OTE2MDM3LCJleHAiOjE3NTI0NjU2MDB9.sIc0OGZbAevld3vGNlwT_UGh5sOINJMk2ABktcqiuag
```

### 2. Webhooké…ç½®é—®é¢˜
- Webhook URLå“åº”æ­£å¸¸ï¼Œä½†å¯èƒ½å·¥ä½œæµæœªæ­£ç¡®é…ç½®
- éœ€è¦åœ¨n8nç•Œé¢ä¸­æ‰‹åŠ¨æ¿€æ´»å·¥ä½œæµ
- æµ‹è¯•æ¨¡å¼ä¸‹webhookéœ€è¦æ‰‹åŠ¨è§¦å‘

### 3. å·¥ä½œæµèŠ‚ç‚¹é…ç½®
æ ¹æ®ä¹‹å‰çš„åˆ†æï¼Œå·¥ä½œæµå¯èƒ½å­˜åœ¨ä»¥ä¸‹é…ç½®é—®é¢˜ï¼š
- Information ExtractorèŠ‚ç‚¹é…ç½®ä¸å®Œæ•´
- HTTP RequestèŠ‚ç‚¹ç¼ºå°‘å¿…è¦çš„å¤´éƒ¨ä¿¡æ¯
- Edit FieldsèŠ‚ç‚¹å¼•ç”¨é”™è¯¯

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆå»ºè®®

### ç«‹å³è¡ŒåŠ¨é¡¹

1. **é‡æ–°ç”ŸæˆAPIå¯†é’¥**
   ```bash
   # åœ¨n8nç•Œé¢ä¸­: Settings > API Keys > Create new key
   ```

2. **æ‰‹åŠ¨æ¿€æ´»å·¥ä½œæµ**
   - åœ¨n8nç•Œé¢ä¸­æ‰“å¼€å·¥ä½œæµ
   - ç‚¹å‡»"Execute Workflow"æŒ‰é’®
   - ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹é…ç½®æ­£ç¡®

3. **éªŒè¯èŠ‚ç‚¹é…ç½®**
   - Information Extractor: ç¡®è®¤JSON Schemaé…ç½®
   - HTTP Request: æ·»åŠ Content-Typeå¤´éƒ¨
   - Edit Fields: ä¿®å¤èŠ‚ç‚¹å¼•ç”¨é”™è¯¯

### é…ç½®ä¿®å¤

#### Information ExtractorèŠ‚ç‚¹
```json
{
  "type": "object",
  "properties": {
    "å§“å": {"type": "string"},
    "ç­çº§": {"type": "string"},
    "æ€»åˆ†åˆ†æ•°": {"type": "number"},
    "è¯­æ–‡åˆ†æ•°": {"type": "number"},
    "æ•°å­¦åˆ†æ•°": {"type": "number"},
    "è‹±è¯­åˆ†æ•°": {"type": "number"}
    // ... å…¶ä»–å­—æ®µ
  }
}
```

#### HTTP RequestèŠ‚ç‚¹
```json
{
  "method": "POST",
  "url": "https://giluhqotfjpmofowvogn.supabase.co/rest/v1/grade_data",
  "headers": {
    "Content-Type": "application/json",
    "apikey": "your-supabase-key",
    "Authorization": "Bearer your-supabase-key"
  },
  "body": "{{ $json.processedData }}"
}
```

## ğŸ“ˆ ä¸‹ä¸€æ­¥æµ‹è¯•è®¡åˆ’

1. **ä¿®å¤é…ç½®é—®é¢˜**
   - æ›´æ–°APIå¯†é’¥
   - ä¿®å¤èŠ‚ç‚¹é…ç½®
   - é‡æ–°æ¿€æ´»å·¥ä½œæµ

2. **å®Œæ•´åŠŸèƒ½æµ‹è¯•**
   - æµ‹è¯•å¤šç§æ–‡ä»¶æ ¼å¼ (CSV, XLSX, XLS)
   - éªŒè¯æ•°æ®è§£æå‡†ç¡®æ€§
   - æµ‹è¯•é”™è¯¯å¤„ç†æœºåˆ¶

3. **æ€§èƒ½æµ‹è¯•**
   - å¤§æ–‡ä»¶ä¸Šä¼ æµ‹è¯•
   - å¹¶å‘è¯·æ±‚æµ‹è¯•
   - å“åº”æ—¶é—´ç›‘æ§

## ğŸ¯ ç»“è®º

è™½ç„¶å­˜åœ¨ä¸€äº›é…ç½®é—®é¢˜ï¼Œä½†åŸºç¡€æ¶æ„æ˜¯æ­£å¸¸çš„ï¼š
- âœ… n8næœåŠ¡è¿è¡Œæ­£å¸¸
- âœ… Webhookæ¥æ”¶æ–‡ä»¶æˆåŠŸ
- âœ… Supabaseæ•°æ®åº“è¿æ¥æ­£å¸¸
- âŒ éœ€è¦ä¿®å¤APIè®¤è¯å’ŒèŠ‚ç‚¹é…ç½®

å»ºè®®ä¼˜å…ˆè§£å†³APIå¯†é’¥å’Œå·¥ä½œæµé…ç½®é—®é¢˜ï¼Œç„¶åè¿›è¡Œå®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ã€‚ 